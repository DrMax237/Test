{"version":3,"sources":["assets\\Iternal_own\\Scripts\\Game\\Dispersion\\DispersionObject.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\nconst __privateProperty = { visible: false, serializable: false };\n\n@ccclass\nexport class DispersionObject extends cc.Component {\n\t@property(cc.Boolean) isSuit = false;\n\t@property(cc.v2) dispersion = cc.v2();\n\t@property(cc.Float) movingTime = 1;\n\t@property(cc.String) movingStartEasing = \"quadOut\";\n\t@property(cc.String) movingFinishEasing = \"quadIn\";\n\t@property(cc.Boolean) isRotating = false;\n\t@property(cc.Float) rotatingTime = 3;\n\t@property(cc.Float) zOffset = 500;\n\n\t@property({ visible: false })\n\tget target(): cc.Node {\n\t\treturn this._target;\n\t}\n\tset target(value: cc.Node) {\n\t\tif (this._target === value) return;\n\n\t\tthis._target = value;\n\t\tthis._onSetTarget();\n\t}\n\n\t@property(__privateProperty) _target: cc.Node = null;\n\t@property(__privateProperty) tweenStart: any = null;\n\t@property(__privateProperty) tweenFinish: any = null;\n\t@property(__privateProperty) tweenRotate: any = null;\n\t@property(__privateProperty) dispersionPosition: cc.Vec2 = null;\n\n\tonLoad() {\n\t\tthis._subscribeToEvents(true);\n\t}\n\tonEnable() {\n\t\tthis._reset();\n\t\tthis._setRandomAngle();\n\t\tthis._subscribeToEvents(true);\n\t}\n\tonDisable() {\n\t\tthis.tweenRotate && this.tweenRotate.stop();\n\t\tthis._subscribeToEvents(false);\n\t}\n\n\tdelete(): void {\n\t\tconst poolableObject = this.node.getComponent(saykit.PoolableObject);\n\n\t\tthis.node.destroy(true);\n\t}\n\n\tprivate _subscribeToEvents(isOn: boolean): void {\n\t\tconst func = isOn ? \"on\" : \"off\";\n\n\t\tcc.systemEvent[func](saykit.Event.SIZE_CHANGE, this.onSizeChange, this);\n\t}\n\tprivate _reset(): void {\n\t\tthis.target = null;\n\t\tthis.tweenStart = null;\n\t\tthis.tweenFinish = null;\n\t\tthis.tweenRotate = null;\n\t}\n\tprivate _onSetTarget(): void {\n\t\tif (!this.target) return;\n\n\t\tthis.dispersionPosition = cc.v2(\n\t\t\t(Math.random() - 0.5) * this.dispersion.x,\n\t\t\t(Math.random() - 0.5) * this.dispersion.y\n\t\t);\n\n\t\tconst targetPosition = this.target.convertToWorldSpaceAR(cc.Vec2.ZERO);\n\t\tconst time = this.dispersionPosition.x != 0 && this.dispersionPosition.y != 0 ? this.movingTime : 0.1;\n\n\t\tthis.tweenStart = saykit.tweenManager.add(\n\t\t\tthis.node,\n\t\t\t{\n\t\t\t\tx: this.node.x + this.dispersionPosition.x,\n\t\t\t\ty: this.node.y + this.dispersionPosition.y,\n\t\t\t\tz: this.zOffset,\n\t\t\t},\n\t\t\ttime,\n\t\t\tthis.movingStartEasing\n\t\t);\n\n\t\tthis.tweenStart.addCompleteCallback(() => {\n\t\t\tthis.tweenFinish = saykit.tweenManager.add(\n\t\t\t\tthis.node,\n\t\t\t\t{\n\t\t\t\t\tx: targetPosition.x,\n\t\t\t\t\ty: targetPosition.y,\n\t\t\t\t},\n\t\t\t\tthis.movingTime,\n\t\t\t\tthis.movingFinishEasing\n\t\t\t);\n\n\t\t\tthis.tweenFinish.addCompleteCallback(() => {\n\t\t\t\tthis.onMovingEnd();\n\t\t\t});\n\t\t});\n\n\t\tif (this.isRotating) {\n\t\t\tthis.tweenRotate = saykit.tweenManager.add(\n\t\t\t\tthis.node,\n\t\t\t\t{\n\t\t\t\t\trotation: 360,\n\t\t\t\t\trotationX: 360,\n\t\t\t\t\trotationY: 360,\n\t\t\t\t},\n\t\t\t\tthis.rotatingTime\n\t\t\t);\n\t\t}\n\t}\n\tprivate _setRandomAngle(angle: number): void {\n\t\tif (!this.isRotating) return;\n\n\t\tthis.node.rotation = -Math.random() * 360;\n\t\tthis.node.rotationX = -Math.random() * 360;\n\t\tthis.node.rotationY = -Math.random() * 360;\n\t}\n\n\tprivate onSizeChange(): void {\n\t\tif (!this.tweenFinish) return;\n\n\t\tconst targetPosition = this.target.convertToWorldSpaceAR(cc.Vec2.ZERO);\n\n\t\tthis.tweenFinish.changeProperties({\n\t\t\tx: { initial: this.dispersionPosition.x, finish: targetPosition.x },\n\t\t\ty: { initial: this.dispersionPosition.y, finish: targetPosition.y },\n\t\t});\n\t}\n\tprivate onMovingEnd(): void {\n\t\tthis.delete();\n\t}\n}\n"]}